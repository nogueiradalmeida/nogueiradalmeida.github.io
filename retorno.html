<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>

<script>
    $(document).ready(function() {
            $("button").click(function() {
                    const clientId = '78r82byagj089p';
                    var code = window.location.search;
                    var secret = prompt("Diga o segredo")
                    if ( code != null && code != undefined ) {
                        code = code.replace("?code=", '');
                        console.log(code);
                        var url = `https://www.linkedin.com/oauth/v2/accessToken?grant_type=authorization_code&client_id=${clientId}&client_secret=${secret}&code=${code}&state=55811&redirect_uri=https://nogueiradalmeida.github.io/retorno.html`
                        var windowObjectReference = window.open(url)
                        console.log(windowObjectReference)
                        // $.getJSON()
                        //         .done(function(data) {
                        //                 console.log('data', data);
                        //         })
                        //         .fail(function(data) {
                        //                 console.log('failed', data);
                        //         });
                        
                        // localStorage.setItem('tOKEN', data.access_token);
                        // accessToken= localStorage.getItem("tOKEN");
                    }

                    var access_token = window.location.search;
                    if ( access_token != null && access_token != undefined ) {
                        access_token = access_token.replace("?access_token=", '');
                        console.log(access_token);
                        window.open(`https://api.linkedin.com/v2/me`)
                    }

                    document.getElementById("req").textContent = 
                    `GET https://api.linkedin.com/v2/me
                     Content-Type: application/json
                     Authorization: Bearer ${access_token}`
                    
                    //         .done(function(data) {
                    //                 console.log('data', data);
                    //         })
                    //         .fail(function(data) {
                    //                 console.log('failed', data);
                    //         });
                    
                    // localStorage.setItem('tOKEN', data.access_token);
                    // accessToken= localStorage.getItem("tOKEN");
                    
                    
            });
    });
</script>

<button type="button">Carrega Token de Acesso</button>
<br>
<br>
<textarea id="req" height="3000"></textarea>    



