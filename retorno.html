<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>

<script>
    $(document).ready(function() {
            $("button").click(function() {
                    const clientId = '78r82byagj089p';
                    var code = window.location.search;
                    var secret = prompt("Diga o segredo")
                    if ( code != null && code != undefined ) {
                        code = code.replace("?code=", '');
                        console.log(code);
                        $.getJSON(`https://www.linkedin.com/oauth/v2/accessToken?grant_type=authorization_code&client_id=${clientId}&client_secret=${secret}&code=${code}&state=55811&redirect_uri=https://nogueiradalmeida.github.io/retorno.html`)
                                .done(function(data) {
                                        console.log('data', data);
                                })
                                .fail(function(data) {
                                        console.log('failed', data);
                                });
                        //window.open(`https://www.linkedin.com/oauth/v2/accessToken?grant_type=authorization_code&client_id=${clientId}&client_secret=${secret}&code=${code}&state=55811&redirect_uri=https://nogueiradalmeida.github.io/retorno.html`)
                    }

                    var token = window.location.search;
                    if ( token != null && token != undefined ) {
                        token = token.replace("?access_token=", '');
                        console.log(token);
                        window.open(`https://api.linkedin.com/v2/me`)
                    }
                    
                    //         .done(function(data) {
                    //                 console.log('data', data);
                    //         })
                    //         .fail(function(data) {
                    //                 console.log('failed', data);
                    //         });
                    
                    // localStorage.setItem('tOKEN', data.access_token);
                    // accessToken= localStorage.getItem("tOKEN");
                    
                    
            });
    });
</script>

<button type="button">Carrega Token de Acesso</button>
    



